<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<!--Converted with LaTeX2HTML 98.1p1 release (March 2nd, 1998)
originally by Nikos Drakos (nikos@cbl.leeds.ac.uk), CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>0.5.1.1.2 Source Code</TITLE>
<META NAME="description" CONTENT="0.5.1.1.2 Source Code">
<META NAME="keywords" CONTENT="alg">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<LINK REL="STYLESHEET" HREF="alg.css">
<LINK REL="previous" HREF="node101.html">
<LINK REL="up" HREF="node100.html">
<LINK REL="next" HREF="node103.html">
</HEAD>
<BODY bgcolor=#cccc99 text=#555555 link=#993300 alink=#006666 vlink=#993300>
<!--Navigation Panel-->
<A NAME="tex2html1673"
 HREF="node103.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next_motif.gif"></A> 
<A NAME="tex2html1669"
 HREF="node100.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up_motif.gif"></A> 
<A NAME="tex2html1665"
 HREF="node101.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="previous_motif.gif"></A> 
<A NAME="tex2html1671"
 HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents_motif.gif"></A> 
<A NAME="tex2html1672"
 HREF="node194.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index_motif.gif"></A> <A HREF="/cgi-bin/glimpse?title=search+the+algorithm+archive&dir=%2fusr%2flocal%2Finfo%2Fhttp%2Fhtdocs%2Fdata%2Fscott%2Fsearch%2Findex%2Falg">Search</A>
<BR>
<B> Next:</B> <A NAME="tex2html1674"
 HREF="node103.html">0.5.1.2 Linear Solution</A>
<B> Up:</B> <A NAME="tex2html1670"
 HREF="node100.html">0.5.1.1 Divide and Conquer</A>
<B> Previous:</B> <A NAME="tex2html1666"
 HREF="node101.html">0.5.1.1.1 Analysis</A>
<BR>
<BR><TABLE WIDTH=640 BGCOLOR=#000000 ALIGN=CENTER CELLPADDING=5><TD><TABLE WIDTH=640 BGCOLOR=#ffffff CELLSPACING=0 ALIGN=CENTER CELLPADDING=5 CELLPADDING=5><TD>
<!--End of Navigation Panel-->

<H4><A NAME="SECTION00061120000000000000">
0.5.1.1.2 Source Code</A>
</H4>

<P>
Below is the source code to the divide and conquer maximum subsequence
problem in C:

<P>
<HR><PRE>
#include &lt;stdio.h&gt;

#define MAXSEQ 400

int numbers[MAXSEQ];
int endat;
int doit(int, int);

int main(void) {
  int i = 0;
  int num;
  int count;

  printf("enter the numbers, -99999 to end... \n");
  
  do {
    scanf("%d", &amp;num);
    numbers[i] = num;
    i++;
  } while (num != -99999);
  count = i - 1;

  printf("max subseq value was %d end at %d\n", doit(0, count), endat);
}


int doit(int l, int r) {
  int mid;
  int ma, mb, mc;
  int i, sum, max;

  if (l == r) {
    return(numbers[l]);

  } else {
    mid = (l + r) / 2;

    if (mid == l) {
      ma = doit(l, l);
      mb = doit(r, r);
    } else {
      ma = doit(l, mid);
      mb = doit(mid, r);
    }

    /* now build mc */
    i = 1;
    sum = numbers[mid];
    max = numbers[mid];

    /* work our way right adding to the sum at each step */
    while ((mid + i) &lt;= r) {
      sum += numbers[mid + i];
      if (sum &gt; max) max = sum;
      i++;
    }
    mc = max - numbers[mid];

    i = 1;
    sum = numbers[mid];
    max = numbers[mid];

    /* now work left */
    while ((mid - i) &gt;= l) {
      sum += numbers[mid - i];
      if (sum &gt; max) max = sum;
      i++;
    }
    mc += max;

    if (mc &gt; mb)
      if (mc &gt; ma)
	return(mc);
      else
	return(ma);
    else
      if (mb &gt; ma)
	return(mb);
      else
	return(ma);
  }
}
</PRE> 
<HR>
<P>
</TD></TABLE></TD></TABLE>

<!--End of Navigation Panel-->
<ADDRESS>
<I>Scott Gasch</I>
<BR><I>1999-07-09</I>
</ADDRESS>
</BODY>
</HTML>
